---
category: [軟件]
tags: [電腦]
title: Docker (DeepIn)
date: 2023-06-01 1:00:00
---

<style>
  table {
    width: 100%
    }
  td {
    vertical-align: center;
    text-align: center;
  }
  table.inputT{
    margin: 10px;
    width: auto;
    margin-left: auto;
    margin-right: auto;
    border: none;
  }
  input{
    text-align: center;
    padding: 0px 10px;
  }
  iframe{
    width: 100%;
    display: block;
    border-style:none;
    overflow:hidden;
  }
</style>

# Docker 简介

Docker 运行应用程式的环境被称作容器。直接运行在宿主机的核心。 以执行应用程式的运行来说，虚拟机器需要模拟出整套作业系统才能运行应用程式，而应用程式容器则是直接运行在宿主机上。 不仅如此，宿主机也可以是虚拟机器。 因此，它比虚拟机器又更为轻量级、执行启动又更快。


## 以下是最基本 shell 脚本用以安装 docker


```
#!/bin/sh

# 将 docker-ce 添加到 Deepin Linux 仓库的 shell 脚本

# 删除旧的 docker 系统
sudo apt-get remove -y docker docker-engine docker.io containerd runc

# 安装依赖档案
sudo apt-get install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common
    
# 添加 GPG 和指纹
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -
sudo apt-key fingerprint 0EBFCD88

# 在 deepin 源列表中添加 debian 仓库
printf 'deb [arch=amd64] https://download.docker.com/linux/debian buster stable\n' \
| sudo tee /etc/apt/sources.list.d/docker-ce.list

# 更新包并安装
sudo apt-get update -y
sudo apt-get install -y docker-ce

# 将当前用户添加到 docker 用户组（可选）
sudo usermod -aG docker $(whoami)
```


## docker 的删除方法

```
sudo apt-get purge docker-ce
sudo apt-get purge docker-ce-cli
sudo rm -rf /var/lib/docker
```

## 尝试安装 Wireguard-easy


[Wireguard-easy網上资源](https://hub.docker.com/r/weejewel/wg-easy)

```
$ docker run -d \
  --name=wg-easy \
  -e WG_HOST=61.238.204.44 \
  -e PASSWORD=admin \
  -e WG_DEFAULT_DNS=8.8.8.8,8.8.4.4 \
  -v ~/.wg-easy:/etc/wireguard \
  -p 51820:51820/udp \
  -p 51821:51821/tcp \
  --cap-add=NET_ADMIN \
  --cap-add=SYS_MODULE \
  --sysctl="net.ipv4.conf.all.src_valid_mark=1" \
  --sysctl="net.ipv4.ip_forward=1" \
  --restart unless-stopped \
  weejewel/wg-easy
```

### 安装完成后可进行以下测试

```
docker images
docker ps -a
```

要在电脑上激活 51820 及 51821 端口， 用以作为 Wireguard 及Wireguard-ui 的通信端口。

用浏览器，输入 WG_HOST 的 IP 及:51821 (61.238.204.44:51821) 来激活 Wireguard-ui。



