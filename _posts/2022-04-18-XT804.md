---
category: [編程]
tags: [編程]
title: RISC V (XT804)
date: 2022-04-18 16:00:00
---

# 安裝 Cross Complier 工具鏈

[W801 互聯網資源](https://occ.t-head.cn/community/download?id=3885366095506644992)

交叉編譯器 : **csky-elfabiv2-tools-x86_64-minilibc-20210423**

```shell
$ mkdir csky-elfabiv2-tools-x86_64-minilibc-20210423
$ tar xvf csky-elfabiv2-tools-x86_64-minilibc-20210423.tar.gz  -C csky-elfabiv2-tools-x86_64-minilibc-20210423/
```

移動到 /opt 下, 目錄可以自己定, 設置權限禁止普通用戶修改


```shell
$ cd /opt/toolchains/
$ sudo mv ~/Download/csky-elfabiv2-tools-x86_64-minilibc-20210423/ .
$ sudo chown -R root:root csky-elfabiv2-tools-x86_64-minilibc-20210423/
```

# 編譯 RISC V (XT804)

[W801 互聯網資源](https://gitee.com/iosetting/wm-sdk-w80x)

運行 *menuconfig* 配置工具路徑

```shell
$ cd wm-sdk-w80x
$ make menuconfig
```

在 *menuconfig* 界面中, Toolchain Configuration -> 第二個 toolchain path, 將剛才的路徑填進去, 需要完整路徑, 帶最後的斜桿, 例如

```shell
/opt/toolchains/csky-elfabiv2-tools-x86_64-minilibc-20210423/bin/
```

首先通過 *dmesg*, *lsusb*, *ls /dev/tty* 等命令確定自己開發板在系統中對應的 **USB** 端口, 例如 **ttyUSB0**

在 *menuconfig* 界面中, Download Configuration -> download port, 填入开发板在你的系统中对应的USB端口, 例如 **ttyUSB0**, 注意这里只需要填纯端口名, 不需要用完整的路径. 可以调高波特率加快下载，只支持 *115200*, *460800*, *921600*, *1000000*, *2000000*, **Save** 后退出 *menuconfig*


```shell
make flash
```

下載完成後, 下載工具會發送復位指令, 復位成功後程序會自動開始執行. 如果自動復位失敗, 則需要按一下






















