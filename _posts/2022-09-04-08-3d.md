---
category: [積體電路]
tags: [IoT, 數學]
title: 3D 變換數學
date: 2022-09-04 1:00:00
---

<style>
  table {
    width: 100%
    }
  td {
    vertical-align: center;
    text-align: center;
  }
  table.inputT{
    margin: 10px;
    width: auto;
    margin-left: auto;
    margin-right: auto;
    border: none;
  }
  input{
    text-align: center;
    padding: 0px 10px;
  }
</style>

 # 3D 變換數學 (矩陣)

## 平移變換

$$ T_{(x,y,z)} = \begin{bmatrix}
 1 & 0 & 0 & T_x \\
 0 & 1 & 0 & T_y \\
 0 & 0 & 1 & T_z \\
 0 & 0 & 0 & 1 \\
\end{bmatrix} $$

### 平移逆矩陣變換

$$ T_{(x,y,z)}^{-1} = T_{(-x,-y,-z)} $$

## 縮放變換

$$ S_{(x,y,z)} = \begin{bmatrix}
 S_x & 0 & 0 & 0 \\
 0 & S_y & 0 & 0 \\
 0 & 0 & S_z & 0 \\
 0 & 0 & 0 & 1 \\
\end{bmatrix} $$

### 縮放逆矩陣變換

$$ S_{(x,y,z)}^{-1} = S_{(\frac {1}{S_x},\frac {1}{S_y},\frac {1}{S_z})} $$

## 旋轉變換

### YZ 平面旋轉

$$ R_x(\phi) = \begin{bmatrix}
 1 & 0 & 0 & 0 \\
 0 & cos\phi & -sin\phi & 0 \\
 0 & sin\phi & cos\phi & 0 \\
 0 & 0 & 0 & 1 \\
\end{bmatrix} $$

### ZX 平面旋轉

$$ R_y(\theta) = \begin{bmatrix}
 cos\theta & 0 & sin\theta & 0 \\
 0 & 1 & 0 & 0 \\
 -sin\theta & 0 & cos\theta & 0 \\
 0 & 0 & 0 & 1 \\
\end{bmatrix} $$

### XY 平面旋轉

$$ R_z(\psi) = \begin{bmatrix}
 cos\psi & -sin\psi & 0 & 0 \\
 sin\psi & cos\psi & 0 & 0 \\
 0 & 0 & 1 & 0 \\
 0 & 0 & 0 & 1 \\
\end{bmatrix} $$

![Alt text](../assets/img/3d/rot3d.png)

### 旋轉逆矩陣變換

$$ R_{(\phi,\theta,\psi)}^{-1} = R_{(-\phi,-\theta,-\psi)} $$

## 3D 變換

 - 當物體要<font color="#FF1000">旋轉</font>時，但參考點不是在原點 $(0,0,0)$，物體需要在旋轉之前將參考點平移到原點，旋轉後再平移回原參考點。

$$ \begin{bmatrix}
 1 & 0 & 0 & -d_x \\
 0 & 1 & 0 & -d_y \\
 0 & 0 & 1 & -d_z \\
 0 & 0 & 0 & 1 \\
\end{bmatrix} 
\times
\begin{bmatrix}
 1 & 0 & 0 & 0 \\
 0 & cos\phi & -sin\phi & 0 \\
 0 & sin\phi & cos\phi & 0 \\
 0 & 0 & 0 & 1 \\
\end{bmatrix}
\times
\begin{bmatrix}
 cos\theta & 0 & sin\theta & 0 \\
 0 & 1 & 0 & 0 \\
 -sin\theta & 0 & cos\theta & 0 \\
 0 & 0 & 0 & 1 \\
\end{bmatrix}
\times
\begin{bmatrix}
 cos\psi & -sin\psi & 0 & 0 \\
 sin\psi & cos\psi & 0 & 0 \\
 0 & 0 & 1 & 0 \\
 0 & 0 & 0 & 1 \\
\end{bmatrix}
\times
\begin{bmatrix}
 1 & 0 & 0 & d_x \\
 0 & 1 & 0 & d_y \\
 0 & 0 & 1 & d_z \\
 0 & 0 & 0 & 1 \\
\end{bmatrix} $$

 - 當物體要<font color="#FF1000">縮放</font>時，但參考點不是在原點 $(0,0,0)$，物體需要在縮放之前將參考點平移到原點，縮放後再平移回原參考點。


$$ \begin{bmatrix}
 1 & 0 & 0 & -d_x \\
 0 & 1 & 0 & -d_y \\
 0 & 0 & 1 & -d_z \\
 0 & 0 & 0 & 1 \\
\end{bmatrix} 
\times
\begin{bmatrix}
 S_x & 0 & 0 & 0 \\
 0 & S_y & 0 & 0 \\
 0 & 0 & S_z & 0 \\
 0 & 0 & 0 & 1 \\
\end{bmatrix}
\times
\begin{bmatrix}
 1 & 0 & 0 & d_x \\
 0 & 1 & 0 & d_y \\
 0 & 0 & 1 & d_z \\
 0 & 0 & 0 & 1 \\
\end{bmatrix} $$











