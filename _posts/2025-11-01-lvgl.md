---
category: [編程]
tags: [IoT, 電子]
title: LVGL
date: 2025-11-01 01:00:00
---

<style>
  table {
    width: 100%
    }
  td {
    vertical-align: center;
    text-align: center;
  }
  table.inputT{
    margin: 10px;
    width: auto;
    margin-left: auto;
    margin-right: auto;
    border: none;
  }
  input{
    text-align: center;
    padding: 0px 10px;
  }
  iframe{
    width: 100%;
    display: block;
    border-style:none;
  }
</style>

# LVGL 介绍

**LVGL** (Light and Versatile Graphics Library) 是一个适用于各种嵌入式平台的 GUI 库，它提供了丰富的控件、主题、动画、字体、图像等元素，以及灵活的布局和事件处理机制。

使用 **C** 语言编写，遵循 <font color="#FF1000">MIT</font> 协议，可以自由地使用和修改。支持多种操作系统，如 Linux、Windows、RTOS 等，也可以在开发板上运行。还支持多种显示器驱动器和触摸屏驱动器，可以与不同大小和分辨率的显示器兼容。  

## 应用例子总结

### 屏幕与标签

```c
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_LABEL

void lv_example(void)
{
  /* 设定屏幕的背景颜色 */
  lv_obj_set_style_bg_color(lv_screen_active(), lv_color_hex(0x003a57), LV_PART_MAIN);

  /* 在屏幕上创建标签 */
  lv_obj_t *label = lv_label_create(lv_screen_active());
    lv_label_set_text(label, "标签"); /* 设定文字 */
    lv_obj_set_style_text_color(lv_screen_active(), lv_color_hex(0xffffff), LV_PART_MAIN); /* 设定颜色 */
    lv_obj_align(label, LV_ALIGN_CENTER, 0, 0); /* 设定对齐方法 */
}
#endif
```

### 按钮与标签

```c
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_BTN

/* 创建按钮 btn 的回调函数 */
static void btn_event_cb(lv_event_t * e)
{
  lv_event_code_t code = lv_event_get_code(e);
  lv_obj_t *btn = lv_event_get_target(e);
  
  if(code == LV_EVENT_CLICKED) {
    static uint8_t cnt = 0;
      cnt++;
    /* 获取按钮的第一个子元素（即标签），并更改其文本 */
    lv_obj_t *label = lv_obj_get_child(btn, 0);
      lv_label_set_text_fmt(label, "Button: %d", cnt);
  }
}

/* 创建一个带有标签的按钮，并响应点击事件函数 btn_event_cb */
void lv_example(void)
{
  /* 在当前屏幕上创建按钮 btn */
  lv_obj_t *btn = lv_btn_create(lv_scr_act()); 
    lv_obj_set_pos(btn, 10, 10); /* 设置其位置 */                           
    lv_obj_set_size(btn, 120, 50); /* 设置其大小 */                           
    lv_obj_add_event_cb(btn, btn_event_cb, LV_EVENT_ALL, NULL); /* 为按钮分配回调函数 */

  /* 在按钮 btn 上创建标签 */
  lv_obj_t *label = lv_label_create(btn);
    lv_label_set_text(label, "按钮"); /* 设定文字 */
    lv_obj_set_style_text_color(btn, lv_color_hex(0xffffff), LV_PART_MAIN); /* 设定颜色 */
    lv_obj_align(label, LV_ALIGN_CENTER, 0, 0); /* 设定对齐方法 */
}
#endif
```


### 添加样式

```c
#include "../lv_examples.h"
#if LV_USE_BUTTON && LV_BUILD_EXAMPLES

static lv_style_t style_btn;
static lv_style_t style_button_pressed;

static lv_color_t darken(const lv_color_filter_dsc_t * dsc, lv_color_t color, lv_opa_t opa)
{
    LV_UNUSED(dsc);
    return lv_color_darken(color, opa);
}

static void style_init(void)
{
  /* 创建一个基本的按钮样式 */
  lv_style_init(&style_btn);
  lv_style_set_radius(&style_btn, 10);
  lv_style_set_bg_opa(&style_btn, LV_OPA_COVER);
  lv_style_set_bg_color(&style_btn, lv_palette_lighten(LV_PALETTE_GREY, 3));
  lv_style_set_bg_grad_color(&style_btn, lv_palette_main(LV_PALETTE_GREY));
  lv_style_set_bg_grad_dir(&style_btn, LV_GRAD_DIR_VER);
  lv_style_set_border_color(&style_btn, lv_color_black());
  lv_style_set_border_opa(&style_btn, LV_OPA_20);
  lv_style_set_border_width(&style_btn, 2);
  lv_style_set_text_color(&style_btn, lv_color_black());

  /* 为按下状态创建样式。用滤镜来修改此状态下的颜色 */
  static lv_color_filter_dsc_t color_filter;
  lv_color_filter_dsc_init(&color_filter, darken);
  lv_style_init(&style_button_pressed);
  lv_style_set_color_filter_dsc(&style_button_pressed, &color_filter);
  lv_style_set_color_filter_opa(&style_button_pressed, LV_OPA_20);
}

/* 创建有样式按钮 */
void lv_example(void)
{
  /* 初始化样式 */
  style_init();

  lv_obj_t *btn = lv_button_create(lv_screen_active());
  /* lv_obj_remove_style_all 也会移除设置的大小和位置。 */
    lv_obj_remove_style_all(btn);
    lv_obj_set_pos(btn, 10, 10);
    lv_obj_set_size(btn, 120, 50);
    lv_obj_add_style(btn, &style_btn, 0);
    lv_obj_add_style(btn, &style_button_pressed, LV_STATE_PRESSED);

  /* 在按钮 btn 上创建标签 */
  lv_obj_t * label = lv_label_create(btn);
    lv_label_set_text(label, "Button");
    lv_obj_center(label);
}
#endif
```

## 滑桿与标签


```c
#include "../lv_examples.h"
#if LV_BUILD_EXAMPLES && LV_USE_SLIDER

static lv_obj_t * label;

/* 创建滑桿 slider 的回调函数 */
static void slider_event_cb(lv_event_t * e)
{
  lv_obj_t *slider = lv_event_get_target_obj(e);
    lv_label_set_text_fmt(label, "%" LV_PRId32, lv_slider_get_value(slider)); /* 刷新文字 */
    lv_obj_align_to(label, slider, LV_ALIGN_OUT_TOP_MID, 0, -15); /* 将滑块顶部对齐 */
}

void lv_example(void)
{
  /* 在显示屏创建一个滑桿*/
  lv_obj_t * slider = lv_slider_create(lv_screen_active());
    lv_obj_set_width(slider, 200);
    lv_obj_center(slider); /* 对齐到父元素（屏幕）的中心 */                              
    lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL);

  label = lv_label_create(lv_screen_active());
    lv_label_set_text(label, "0");
    lv_obj_align_to(label, slider, LV_ALIGN_OUT_TOP_MID, 0, -15); 
}
#endif
```


以上是 LVGL 介绍，但如果在开发版简化为目的。可以直接用 MPU 开发版的 **WiFi** 网络功能。用 HTML、CSS 及 JavaScript 开发 UI 介面。之前作品供参考 [ESP Http 服务器](https://hkdickyko.github.io/%E7%A9%8D%E9%AB%94%E9%9B%BB%E8%B7%AF/server)