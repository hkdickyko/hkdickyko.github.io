---
category: [系统]
tags: [编程, 電子]
title: lua tools
date: 2025-09-06 1:00:00
---

<style>
  table {
    width: 100%
    }
  td {
    vertical-align: center;
    text-align: center;
  }
  td.left {
    vertical-align: center;
    text-align: left;
  }  
  table.inputT{
    margin: 10px;
    width: auto;
    margin-left: auto;
    margin-right: auto;
    border: none;
  }
  input{
    text-align: center;
    padding: 0px 10px;
  }
  iframe{
    width: 100%;
    display: block;
    border-style:none;
  }
</style>

# lua 功具资源

Lua 与共享库（通常称为 C 模块或扩展）交互，通过与用 C/C++ 或其他可编译成共享库的语言编写的代码集成来扩展其功能。这使得 Lua 脚本能够利用现有的编译代码、访问系统级功能或比纯 Lua 更高效地执行计算密集型任务。


## CMake 编绎功具资源

### CMakeLists.txt 模板

```cmake
# 处理该项目所需的 CMake 最低版本
cmake_minimum_required(VERSION 4.1.1)

# XXX 为要编绎的 Lua 共享库名称
set(PROG_NAME "luasocket")
set(LUA_SRC_DIR "/data/data/com.termux/files/home")
project (${PROG_NAME}_prog)

# 共享库 C 文件在 src 目录下的名称列表
file(GLOB SRC_LIST src/*.c)

# 要编绎的 Lua 共享库
add_library(${PROG_NAME} SHARED ${SRC_LIST})

# 相等于编绎時的 -fpic， 配合以上的 SHARED 用于编绎动态程式库 .so
set_target_properties(${PROG_NAME} PROPERTIES POSITION_INDEPENDENT_CODE ON)

# 要链结的 Lua 头文件目录
target_include_directories(${PROG_NAME} PUBLIC ${LUA_SRC_DIR}/lua-5.4.8/src)

# 要链结的 Lua 动态程式库目录
target_link_directories(${PROG_NAME} PUBLIC ${LUA_SRC_DIR}/lua-5.4.8/build)
```

## C 文件要注意事项

### C #include ＜＞ 和 #include ““ 的区别

所以，一般情况下引用标准函数库中的头文件时，用#include<> 能有更高的效率，但是其实它的查找顺序非常严格：

1. #include <>

    - 在编译器设置的 include 路径内搜索
    - 如果是在命令行中编译，则在系统的 INCLUDE 环境变量内搜索

2. #include ""

    - 在包含当前 include 指令的文件所在的文件夹内搜索
    - 如果上一步找不到，则在之前已经使用 include 指令打开过的文件所在的文件夹内搜索，如果已经有多个被 include 的文件，则按照它们被打开的相反顺序去搜索
    - 如果上一步找不到，则在编译器设置的 include 路径内搜索
    - 如果上一步找不到，则在系统的 INCLUDE 环境变量内搜索。

所以，要注意的一点就是，如果自己写的头文件，而不是标准库函数中的，那么引用这个头文件要使用 #include ""，而不能使用 #include <>，因为我们自己写的头文件并不在编译器设置的路径内，使用 #include <> 会提示无法找到。